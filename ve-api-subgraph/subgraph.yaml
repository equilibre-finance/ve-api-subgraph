specVersion: 0.0.5
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: Voter
    network: mainnet
    source:
      address: "0x4eB2B9768da9Ea26E3aBe605c9040bC12F236a59"
      abi: "Voter"
      startBlock: 5530444
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      file: ./src/voter.ts
      entities:
        - Vote
        - AbstainedEvent
        - AttachEvent
        - DepositEvent
        - DetachEvent
        - DistributeRewardEvent
        - GaugeCreatedEvent
        - GaugeKilledEvent
        - GaugeRevivedEvent
        - NotifyRewardEvent
        - VotedEvent
        - WhitelistedEvent
        - WithdrawEvent
      abis:
        - name: Voter
          file: ./abis/voter-abi.json
      eventHandlers:
        - event: Voted(indexed address,uint256,uint256)
          handler: handleVoted
        - event: Abstained(uint256,uint256)
          handler: handleAbstained
        - event: Attach(indexed address,indexed address,uint256)
          handler: handleAttach
        - event: Deposit(indexed address,indexed address,uint256,uint256)
          handler: handleDeposit
        - event: Detach(indexed address,indexed address,uint256)
          handler: handleDetach
        - event: DistributeReward(indexed address,indexed address,uint256)
          handler: handleDistributeReward
        - event: GaugeCreated(indexed address,address,address,indexed address,indexed address)
          handler: handleGaugeCreated
        - event: GaugeKilled(indexed address)
          handler: handleGaugeKilled
        - event: GaugeRevived(indexed address)
          handler: handleGaugeRevived
        - event: NotifyReward(indexed address,indexed address,uint256)
          handler: handleNotifyReward
        - event: Whitelisted(indexed address,indexed address)
          handler: handleWhitelisted
        - event: Withdraw(indexed address,indexed address,uint256,uint256)
          handler: handleWithdraw
  
  - kind: ethereum/contract
    name: EquilibreV2Factory
    network: mainnet
    source:
      address: "0x32F96f8Db7AC0a014D803865dE0A18608637080E"
      abi: EquilibreV2Factory
      startBlock: 5530444
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      file: ./src/equilibreV2Factory.ts
      entities:
        - Pool
        - Fee
        - Owner        
      abis:
        - name: EquilibreV2Factory
          file: ./EquilibreV2Factory.json
      eventHandlers:
        - event: PoolCreated(address,address,uint24,int24,address)
          handler: handlePoolCreated
        - event: FeeAmountEnabled(uint24,int24)
          handler: handleFeeAmountEnabled
        - event: OwnerChanged(address,address)
          handler: handleOwnerChanged
        - event: FeeSetterChanged(address,address)
          handler: handleFeeSetterChanged
        - event: FeeCollectorChanged(address,address)
          handler: handleFeeCollectorChanged
        - event: ImplementationChanged(address,address)
          handler: handleImplementationChanged
        - event: SetFeeProtocol(uint8,uint8,uint8,uint8)
          handler: handleSetFeeProtocol
        - event: SetPoolFeeProtocol(address,uint8,uint8,uint8,uint8)
          handler: handleSetPoolFeeProtocol
          
    - kind: ethereum/contract
      name: FeeCollector
      network: mainnet
      source:
        address: "0x450AC9028D3d7AE644DBC10fb9a598DA857E7759"
        abi: FeeCollector
        startBlock: 5530444
      mapping:
        kind: ethereum/events
        apiVersion: 0.0.6
        language: wasm/assemblyscript
        file: ./src/feeCollector.ts
        entities:
          - FeesCollected
          - TreasuryChanged
          - TreasuryFeesChanged
        abis:
          - name: FeeCollector
            file: ./abis/FeeCollector.json
        eventHandlers:
          - event: FeesCollected(address,uint256,uint256,uint256,uint256)
            handler: handleFeesCollected
          - event: TreasuryChanged(address,address)
            handler: handleTreasuryChanged
          - event: TreasuryFeesChanged(uint256,uint256)
            handler: handleTreasuryFeesChanged

    - kind: ethereum/contract
      name: EquilibreV2Pool
      network: mainnet
      source:
        address: "0x32F96f8Db7AC0a014D803865dE0A18608637080E"
        abi: EquilibreV2Pool
        startBlock: 5530444
      mapping:
        kind: ethereum/events
        apiVersion: 0.0.6
        language: wasm/assemblyscript
        file: ./src/equilibreV2Pool.ts
        entities:
          - Burn
          - Collect
          - CollectProtocol
          - Flash
          - IncreaseObservationCardinalityNext
          - Initialize
          - Mint
          - SetFeeProtocol
          - Swap
        abis:
          - name: EquilibreV2Pool
            file: ./abis/EquilibreV2Pool.json
        eventHandlers:
          - event: Burn(address,int24,int24,uint128,uint256,uint256)
            handler: handleBurn
          - event: Collect(address,address,int24,int24,uint128,uint128)
            handler: handleCollect
          - event: CollectProtocol(address,address,uint128,uint128)
            handler: handleCollectProtocol
          - event: Flash(address,address,int256,int256,uint160,uint128,int24)
            handler: handleFlash
          - event: IncreaseObservationCardinalityNext(uint16,uint16)
            handler: handleIncreaseObservationCardinalityNext
          - event: Initialize(uint160,int24)
            handler: handleInitialize
          - event: Mint(address,int24,int24,uint128,uint256,uint256)
            handler: handleMint
          - event: SetFeeProtocol(uint8,uint8,uint8,uint8)
            handler: handleSetFeeProtocol
          - event: Swap(address,address,int256,int256,uint160,uint128,int24)
            handler: handleSwap
    - kind: ethereum/contract
      name: Position
      network: mainnet
      source:
        address: "0xfdA1777acA69bf204F5f6d60a1AAAB03703fabfB"
        abi: Position
        startBlock: 5530444  
      mapping:
        kind: ethereum/events
        apiVersion: 0.0.6
        language: wasm/assemblyscript
        file: ./src/position.ts
        entities:
          - PositionPeriodSecondsInRange
        abis:
          - name: Position
            file: ./abis/position.json
        eventHandlers:
          - event: PositionPeriodSecondsInRange(uint256,address,uint256,int24,int24,uint256)
            handler: handlePositionPeriodSecondsInRange

    - kind: ethereum/contract
      name: ProtocolActions
      network: mainnet
      source:
        address: "0x7B4BaAA7ec9D3B3D486D9E9e62510422e49420De"
        abi: ProtocolActions
        startBlock: 5530444
      mapping:
        kind: ethereum/events
        apiVersion: 0.0.6
        language: wasm/assemblyscript
        file: ./src/protocolActions.ts
        entities:
          - CollectProtocol
          - FeeAdjustment
          - SetFeeProtocol
        abis:
          - name: ProtocolActions
            file: ./abis/ProtocolActions.json
        eventHandlers:
          - event: CollectProtocol(address,address,uint128,uint128)
            handler: handleCollectProtocol
          - event: FeeAdjustment(uint24,uint24)
            handler: handleFeeAdjustment
          - event: SetFeeProtocol(uint8,uint8,uint8,uint8)
            handler: handleSetFeeProtocol
